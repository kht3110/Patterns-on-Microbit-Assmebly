.syntax unified
@ --------------------- Module Interface --------------------
@ Symbol exports:
@ NOTE: these symbols should be used in the following way:
@   ldr r0, =SYMBOL

@ base addresses (ADR = address)
@ Cortex M4
.global ADR_SYST_CSR    @ 0xE000E010
.global ADR_SYST_RVR    @ 0xE000E014
.global ADR_SYST_CVR    @ 0xE000E018
.global ADR_NVIC        @ 0xE000E000
.global ADR_SCB_ICSR    @ 0xE000ED04
.global ADR_SCB_SHPR1   @ 0xE000ED18
.global ADR_SCB_SHPR2   @ 0xE000ED1C
.global ADR_SCB_SHPR3   @ 0xE000ED20
.global ADR_MPU,        @ 0xE000ED90

@ offsets (OFS = offset)
@ NVIC
.global OFS_NVIC_ISER0   @ 0x100
.global OFS_NVIC_ICER0   @ 0x180
.global OFS_NVIC_ISPR0   @ 0x200
.global OFS_NVIC_ICPR0   @ 0x280
.global OFS_NVIC_IABR0   @ 0x300
.global OFS_NVIC_IPR0    @ 0x400

.global OFS_NVIC_ISER1   @ 0x104
.global OFS_NVIC_ICER1   @ 0x184
.global OFS_NVIC_ISPR1   @ 0x204
.global OFS_NVIC_ICPR1   @ 0x284
.global OFS_NVIC_IABR1   @ 0x304
.global OFS_NVIC_IPR1    @ 0x404

.global OFS_NVIC_ISER2   @ 0x108
.global OFS_NVIC_ICER2   @ 0x188
.global OFS_NVIC_ISPR2   @ 0x208
.global OFS_NVIC_ICPR2   @ 0x288
.global OFS_NVIC_IABR2   @ 0x308
.global OFS_NVIC_IPR2    @ 0x408

@ Peripherals

.global ADR_P0          @ 0x50000000 @ Port 0
.global ADR_P1          @ 0x50000300 @ Port 1
.global OFS_GPIO_OUT    @ 0x504
.global OFS_GPIO_OUTSET @ 0x508
.global OFS_GPIO_OUTCLR @ 0x50C
.global OFS_GPIO_IN     @ 0x510
.global OFS_GPIO_DIR    @ 0x514
.global OFS_GPIO_DIRSET @ 0x518
.global OFS_GPIO_DIRCLR @ 0x51C

.global ADR_GPIOTE
.global GPIOTE_ID
.global OFS_GPIOTE_TASKS_OUT0   @ 0x000
.global OFS_GPIOTE_TASKS_OUT1   @ 0x004
.global OFS_GPIOTE_TASKS_OUT2   @ 0x008
.global OFS_GPIOTE_TASKS_OUT3   @ 0x00C
.global OFS_GPIOTE_TASKS_OUT4   @ 0x010
.global OFS_GPIOTE_TASKS_OUT5   @ 0x014
.global OFS_GPIOTE_TASKS_OUT6   @ 0x018
.global OFS_GPIOTE_TASKS_OUT7   @ 0x01C
.global OFS_GPIOTE_TASKS_SET0   @ 0x030
.global OFS_GPIOTE_TASKS_SET1   @ 0x034
.global OFS_GPIOTE_TASKS_SET2   @ 0x038
.global OFS_GPIOTE_TASKS_SET3   @ 0x03C
.global OFS_GPIOTE_TASKS_SET4   @ 0x040
.global OFS_GPIOTE_TASKS_SET5   @ 0x044
.global OFS_GPIOTE_TASKS_SET6   @ 0x048
.global OFS_GPIOTE_TASKS_SET7   @ 0x04C
.global OFS_GPIOTE_TASKS_CLR0   @ 0x060
.global OFS_GPIOTE_TASKS_CLR1   @ 0x064
.global OFS_GPIOTE_TASKS_CLR2   @ 0x068
.global OFS_GPIOTE_TASKS_CLR3   @ 0x06C
.global OFS_GPIOTE_TASKS_CLR4   @ 0x070
.global OFS_GPIOTE_TASKS_CLR5   @ 0x074
.global OFS_GPIOTE_TASKS_CLR6   @ 0x078
.global OFS_GPIOTE_TASKS_CLR7   @ 0x07C
.global OFS_GPIOTE_EVENTS_IN0   @ 0x100
.global OFS_GPIOTE_EVENTS_IN1   @ 0x104
.global OFS_GPIOTE_EVENTS_IN2   @ 0x108
.global OFS_GPIOTE_EVENTS_IN3   @ 0x10C
.global OFS_GPIOTE_EVENTS_IN4   @ 0x110
.global OFS_GPIOTE_EVENTS_IN5   @ 0x114
.global OFS_GPIOTE_EVENTS_IN6   @ 0x118
.global OFS_GPIOTE_EVENTS_IN7   @ 0x11C
.global OFS_GPIOTE_EVENTS_PORT  @ 0x17C
.global OFS_GPIOTE_INTENSET     @ 0x304
.global OFS_GPIOTE_INTENCLR     @ 0x308
.global OFS_GPIOTE_CONFIG0      @ 0x510
.global OFS_GPIOTE_CONFIG1      @ 0x514
.global OFS_GPIOTE_CONFIG2      @ 0x518
.global OFS_GPIOTE_CONFIG3      @ 0x51C
.global OFS_GPIOTE_CONFIG4      @ 0x520
.global OFS_GPIOTE_CONFIG5      @ 0x524
.global OFS_GPIOTE_CONFIG6      @ 0x528
.global OFS_GPIOTE_CONFIG7      @ 0x52C


@ Timers
@ Base Addresses
.global ADR_TIMER0 @ 0x40008000
.global ADR_TIMER1 @ 0x40009000
.global ADR_TIMER2 @ 0x4000A000
.global ADR_TIMER3 @ 0x4001A000
.global ADR_TIMER4 @ 0x4001B000

@ Offsets
.global OFS_TIMER_TASKS_START     @ 0x000
.global OFS_TIMER_TASKS_STOP      @ 0x004
.global OFS_TIMER_TASKS_COUNT     @ 0x008
.global OFS_TIMER_TASKS_CLEAR     @ 0x00C
.global OFS_TIMER_TASKS_SHUTDOWN  @ 0x010
.global OFS_TIMER_TASKS_CAPTURE0  @ 0x040
.global OFS_TIMER_TASKS_CAPTURE1  @ 0x044
.global OFS_TIMER_TASKS_CAPTURE2  @ 0x048
.global OFS_TIMER_TASKS_CAPTURE3  @ 0x04C
.global OFS_TIMER_TASKS_CAPTURE4  @ 0x050
.global OFS_TIMER_TASKS_CAPTURE5  @ 0x054
.global OFS_TIMER_EVENTS_COMPARE0 @ 0x140
.global OFS_TIMER_EVENTS_COMPARE1 @ 0x144
.global OFS_TIMER_EVENTS_COMPARE2 @ 0x148
.global OFS_TIMER_EVENTS_COMPARE3 @ 0x14C
.global OFS_TIMER_EVENTS_COMPARE4 @ 0x150
.global OFS_TIMER_EVENTS_COMPARE5 @ 0x154
.global OFS_TIMER_SHORTS          @ 0x200
.global OFS_TIMER_ITENSET         @ 0x304
.global OFS_TIMER_ITENCLR         @ 0x308
.global OFS_TIMER_MODE            @ 0x504
.global OFS_TIMER_BITMODE         @ 0x508
.global OFS_TIMER_PRESCALER       @ 0x510
.global OFS_TIMER_CC0             @ 0x540
.global OFS_TIMER_CC1             @ 0x544
.global OFS_TIMER_CC2             @ 0x548
.global OFS_TIMER_CC3             @ 0x54C
.global OFS_TIMER_CC4             @ 0x550
.global OFS_TIMER_CC5             @ 0x554


@ --------------------- Implementation --------------------
.set ADR_SYST_CSR,  0xE000E010
.set ADR_SYST_RVR,  0xE000E014
.set ADR_SYST_CVR,  0xE000E018
.set ADR_NVIC,      0xE000E000
.set ADR_SCB_ICSR,  0xE000ED04
.set ADR_SCB_SHPR1, 0xE000ED18
.set ADR_SCB_SHPR2, 0xE000ED1C
.set ADR_SCB_SHPR3, 0xE000ED20
.set ADR_ICSR,      0xE000ED00
.set ADR_SHPR,      0xE000ED14
.set ADR_MPU,       0xE000ED90

.set OFS_NVIC_ISER0,  0x100
.set OFS_NVIC_ICER0,  0x180
.set OFS_NVIC_ISPR0,  0x200
.set OFS_NVIC_ICPR0,  0x280
.set OFS_NVIC_IABR0,  0x300
.set OFS_NVIC_IPR0,   0x400

.set OFS_NVIC_ISER1,  0x104
.set OFS_NVIC_ICER1,  0x184
.set OFS_NVIC_ISPR1,  0x204
.set OFS_NVIC_ICPR1,  0x284
.set OFS_NVIC_IABR1,  0x304
.set OFS_NVIC_IPR1,   0x404

.set OFS_NVIC_ISER2,  0x108
.set OFS_NVIC_ICER2,  0x188
.set OFS_NVIC_ISPR2,  0x208
.set OFS_NVIC_ICPR2,  0x288
.set OFS_NVIC_IABR2,  0x308
.set OFS_NVIC_IPR2,   0x408

@ ---------- GPIO ---------- @

@ GPIO Port Base Addresses
.set ADR_P0,   0x50000000 @ Port 0
.set ADR_P1,   0x50000300 @ Port 1
@ GPIO Offsets
.set OFS_GPIO_OUT,      0x504
.set OFS_GPIO_OUTSET,   0x508
.set OFS_GPIO_OUTCLR,   0x50C
.set OFS_GPIO_IN,       0x510
.set OFS_GPIO_DIR,      0x514
.set OFS_GPIO_DIRSET,   0x518
.set OFS_GPIO_DIRCLR,   0x51C
@ PIN_CNF
.global OFS_GPIO_PIN_CONF4
.set OFS_GPIO_PIN_CONF0, 0x700
.set OFS_GPIO_PIN_CONF1, 0x704
.set OFS_GPIO_PIN_CONF2, 0x708
.set OFS_GPIO_PIN_CONF3, 0x70C
.set OFS_GPIO_PIN_CONF4, 0x710
.set OFS_GPIO_PIN_CONF5, 0x714

@ ---------- GPIO Tasks and Events ---------- @

@ GPIOTE Base Address
.set ADR_GPIOTE, 0x40006000
@ ID of GPIOTE in NVIC
.set GPIOTE_ID, 6
@ GPIOTE Offsets
.set OFS_GPIOTE_TASKS_OUT0, 0x000
.set OFS_GPIOTE_TASKS_OUT1, 0x004
.set OFS_GPIOTE_TASKS_OUT2, 0x008
.set OFS_GPIOTE_TASKS_OUT3, 0x00C
.set OFS_GPIOTE_TASKS_OUT4, 0x010
.set OFS_GPIOTE_TASKS_OUT5, 0x014
.set OFS_GPIOTE_TASKS_OUT6, 0x018
.set OFS_GPIOTE_TASKS_OUT7, 0x01C
.set OFS_GPIOTE_TASKS_SET0, 0x030
.set OFS_GPIOTE_TASKS_SET1, 0x034
.set OFS_GPIOTE_TASKS_SET2, 0x038
.set OFS_GPIOTE_TASKS_SET3, 0x03C
.set OFS_GPIOTE_TASKS_SET4, 0x040
.set OFS_GPIOTE_TASKS_SET5, 0x044
.set OFS_GPIOTE_TASKS_SET6, 0x048
.set OFS_GPIOTE_TASKS_SET7, 0x04C
.set OFS_GPIOTE_TASKS_CLR0, 0x060
.set OFS_GPIOTE_TASKS_CLR1, 0x064
.set OFS_GPIOTE_TASKS_CLR2, 0x068
.set OFS_GPIOTE_TASKS_CLR3, 0x06C
.set OFS_GPIOTE_TASKS_CLR4, 0x070
.set OFS_GPIOTE_TASKS_CLR5, 0x074
.set OFS_GPIOTE_TASKS_CLR6, 0x078
.set OFS_GPIOTE_TASKS_CLR7, 0x07C
.set OFS_GPIOTE_EVENTS_IN0, 0x100
.set OFS_GPIOTE_EVENTS_IN1, 0x104
.set OFS_GPIOTE_EVENTS_IN2, 0x108
.set OFS_GPIOTE_EVENTS_IN3, 0x10C
.set OFS_GPIOTE_EVENTS_IN4, 0x110
.set OFS_GPIOTE_EVENTS_IN5, 0x114
.set OFS_GPIOTE_EVENTS_IN6, 0x118
.set OFS_GPIOTE_EVENTS_IN7, 0x11C
.set OFS_GPIOTE_EVENTS_PORT, 0x17C
.set OFS_GPIOTE_INTENSET, 0x304
.set OFS_GPIOTE_INTENCLR, 0x308
.set OFS_GPIOTE_CONFIG0, 0x510
.set OFS_GPIOTE_CONFIG1, 0x514
.set OFS_GPIOTE_CONFIG2, 0x518
.set OFS_GPIOTE_CONFIG3, 0x51C
.set OFS_GPIOTE_CONFIG4, 0x520
.set OFS_GPIOTE_CONFIG5, 0x524
.set OFS_GPIOTE_CONFIG6, 0x528
.set OFS_GPIOTE_CONFIG7, 0x52C

@ ---------- TIMERS ---------- @
@ Base Timer Addresses
.set ADR_TIMER0, 0x40008000
.set ADR_TIMER1, 0x40009000
.set ADR_TIMER2, 0x4000A000
.set ADR_TIMER3, 0x4001A000
.set ADR_TIMER4, 0x4001B000

@ Time Offsets
.set OFS_TIMER_TASKS_START,     0x000
.set OFS_TIMER_TASKS_STOP,      0x004
.set OFS_TIMER_TASKS_COUNT,     0x008
.set OFS_TIMER_TASKS_CLEAR,     0x00C
.set OFS_TIMER_TASKS_SHUTDOWN,  0x010
.set OFS_TIMER_TASKS_CAPTURE0,  0x040
.set OFS_TIMER_TASKS_CAPTURE1,  0x044
.set OFS_TIMER_TASKS_CAPTURE2,  0x048
.set OFS_TIMER_TASKS_CAPTURE3,  0x04C
.set OFS_TIMER_TASKS_CAPTURE4,  0x050
.set OFS_TIMER_TASKS_CAPTURE5,  0x054
.set OFS_TIMER_EVENTS_COMPARE0, 0x140
.set OFS_TIMER_EVENTS_COMPARE1, 0x144
.set OFS_TIMER_EVENTS_COMPARE2, 0x148
.set OFS_TIMER_EVENTS_COMPARE3, 0x14C
.set OFS_TIMER_EVENTS_COMPARE4, 0x150
.set OFS_TIMER_EVENTS_COMPARE5, 0x154
.set OFS_TIMER_SHORTS,          0x200
.set OFS_TIMER_ITENSET,         0x304
.set OFS_TIMER_ITENCLR,         0x308
.set OFS_TIMER_MODE,            0x504
.set OFS_TIMER_BITMODE,         0x508
.set OFS_TIMER_PRESCALER,       0x510
.set OFS_TIMER_CC0,             0x540
.set OFS_TIMER_CC1,             0x544
.set OFS_TIMER_CC2,             0x548
.set OFS_TIMER_CC3,             0x54C
.set OFS_TIMER_CC4,             0x550
.set OFS_TIMER_CC5,             0x554
